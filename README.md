# whack a mole

[Деплой старой версии игры](https://daniil_khlyvniuk.gitlab.io/whack-a-mole/) (визуально похожи)

## Проблема:

При диспатче одного и того же числа происходит "state are equal" и анимация кротов останавливается

На данный момент, в виде временного решения, дописал while чтоб цифры не повторялись. Его можно убрать в
customHooks `useMoleAnimation` на 16 строке закоментируйте while

## пытался решить (безуспешно) так:

1. перед каждым диспатчем нужного числа диспатчить -1 `-->` анимация сходит с ума
2. перед диспатчем нужного числа только если номер повторяеся `-->` анимация сходит с ума
3. пытался в место числа передавать массив или объект (с идеей, что ссылочный тип данных и редакс не будет сравнивать
   глобоко) `-->` происходит "state are equal" и анимация кротов останавливается
4. пытался в редюсере перепарсить стейт таким образом:

```javascript
// ...
case types.SET_ACTIVE_MOLE:
const likeANewState = JSON.parse(JSON.stringify(state))

return {
	...likeANewState,
	activeMole: action.payload,
}
//...


// и так:

//...
case types.SET_ACTIVE_MOLE:
const likeANewState = state
likeANewState.activeMole = action.payload

return JSON.parse(JSON.stringify(likeANewState))
// ...

//--> происходит "state are equal" и анимация кротов останавливается
```

# Возможно будет полезно:

1. Если хотите остановить декремент жизней, в компоненте `Goal` закоментируйте 31-ю строку
2. На данный момент, в виде временного решения, дописал while что б цифры не повторялись. Чтоб его убрать в
   customHooks `useMoleAnimation` на 16 строке закоментируйте while
3. Уровни сложности ни на что не влияют. Добавил их на будущее
4. Логика главной анимации вынесена в customHooks `useMoleAnimation`
5. Все обработчики, отвечающие за геймплей, весят на компоненте `Goal`. Его анимация синхронизирована с анимацией
   крота `Mole`. Сейчас компонент `Goal` полупрозрачный, в финале должен быть невидемым
6. Логика завершения игры описана не до конца, после гейм овера необходимо обновить страницу

### История проекта

Изаначально это доп дз(8) по advanced js, писал на классах. Затем в ходе изучения реакта переписываласть на рект,
позже я переписал анимации с использованием react transition group. Никогда не планировал какой-то сложной логики, но
сейчас появилось желакие доделать проект.

